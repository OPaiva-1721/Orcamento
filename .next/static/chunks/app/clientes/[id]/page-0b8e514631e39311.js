(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{63:(e,t,r)=>{"use strict";var a=r(7260);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},1166:(e,t,r)=>{"use strict";r.d(t,{$:()=>n});var a=r(5155),s=r(2115),l=r(4269);let n=s.forwardRef((e,t)=>{let{className:r,variant:s="default",size:n="default",loading:i,children:c,disabled:o,asChild:d,...u}=e;return(0,a.jsxs)("button",{className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50 text-gray-900",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"}[s],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[n],r),ref:t,disabled:o||i,...u,children:[i&&(0,a.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c]})});n.displayName="Button"},1169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:r,strokeWidth:c?24*Number(i)/Number(n):i,className:s("lucide",o),...m},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:i,...c}=r;return(0,a.createElement)(n,{ref:l,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),i),...c})});return r.displayName="".concat(e),r}},4269:(e,t,r)=>{"use strict";r.d(t,{Yq:()=>i,cn:()=>l,vv:()=>n});var a=r(2821),s=r(5889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}function n(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}function i(e){let t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t)}},5590:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var a=r(5155),s=r(2115),l=r(4269);let n=s.forwardRef((e,t)=>{let{className:r,type:n,label:i,error:c,helperText:o,id:d,...u}=e,m=d||s.useId();return(0,a.jsxs)("div",{className:"space-y-2",children:[i&&(0,a.jsx)("label",{htmlFor:m,className:"text-sm font-medium text-gray-700",children:i}),(0,a.jsx)("input",{type:n,className:(0,l.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c&&"border-red-500 focus-visible:ring-red-500",r),ref:t,id:m,...u}),c&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:c}),o&&!c&&(0,a.jsx)("p",{className:"text-sm text-gray-500",children:o})]})});n.displayName="Input"},5626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5991:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(5155),s=r(2115),l=r(63),n=r(1166),i=r(5590),c=r(7972),o=r(5626),d=r(6046),u=r(1169),m=r(2619),h=r.n(m);function x(e){let{params:t}=e,r=(0,l.useRouter)(),[m,x]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null),[g,y]=(0,s.useState)(null),[j,v]=(0,s.useState)({nome:"",cnpj:"",email:"",telefone:""});(0,s.useEffect)(()=>{(async()=>{y(await t)})()},[t]),(0,s.useEffect)(()=>{g&&b()},[g]);let b=async()=>{if(g)try{let e=await fetch("/api/clientes/".concat(g.id)),t=await e.json();t.success?(p(t.data),v({nome:t.data.nome,cnpj:t.data.cnpj,email:t.data.email,telefone:t.data.telefone})):(alert("Cliente n\xe3o encontrado"),r.push("/clientes"))}catch(e){console.error("Erro ao carregar cliente:",e),alert("Erro ao carregar cliente")}},N=async e=>{if(e.preventDefault(),g){x(!0);try{let e=await fetch("/api/clientes/".concat(g.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),t=await e.json();t.success?(alert("Cliente atualizado com sucesso!"),r.push("/clientes")):alert("Erro ao atualizar cliente: ".concat(t.error))}catch(e){console.error("Erro ao atualizar cliente:",e),alert("Erro ao atualizar cliente")}finally{x(!1)}}},w=e=>{v({...j,[e.target.name]:e.target.value})};return f?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsxs)(h(),{href:"/clientes",children:[(0,a.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Voltar"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Cliente"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Atualize as informa\xe7\xf5es do cliente"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Informa\xe7\xf5es do Cliente"}),(0,a.jsxs)(c.BT,{children:["Atualize os dados do cliente ",f.nome]})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(i.p,{label:"Nome da Empresa",name:"nome",value:j.nome,onChange:w,placeholder:"Ex: Empresa ABC Ltda",required:!0}),(0,a.jsx)(i.p,{label:"CNPJ",name:"cnpj",value:j.cnpj,onChange:w,placeholder:"00.000.000/0000-00",required:!0}),(0,a.jsx)(i.p,{label:"Email",name:"email",type:"email",value:j.email,onChange:w,placeholder:"contato@empresa.com",required:!0}),(0,a.jsx)(i.p,{label:"Telefone",name:"telefone",value:j.telefone,onChange:w,placeholder:"(11) 99999-9999",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",asChild:!0,children:(0,a.jsx)(h(),{href:"/clientes",children:"Cancelar"})}),(0,a.jsxs)(n.$,{type:"submit",loading:m,children:[(0,a.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Salvar Altera\xe7\xf5es"]})]})]})})]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)(c.ZB,{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2 h-5 w-5"}),"Destinat\xe1rios"]})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:f.destinatarios.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"destinat\xe1rio(s) cadastrado(s)"}),f.destinatarios.length>0&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h(),{href:"/destinatarios",className:"text-blue-600 hover:underline text-sm",children:"Ver todos os destinat\xe1rios →"})})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Or\xe7amentos"})}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:f.orcamentos.length}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"or\xe7amento(s) criado(s)"}),f.orcamentos.length>0&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h(),{href:"/orcamentos",className:"text-blue-600 hover:underline text-sm",children:"Ver todos os or\xe7amentos →"})})]})]})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Carregando cliente..."})]})})}},6046:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},6263:(e,t,r)=>{Promise.resolve().then(r.bind(r,5991))},7972:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>c,Zp:()=>n,aR:()=>i});var a=r(5155),s=r(2115),l=r(4269);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",r),...s})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});c.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-gray-500",r),...s})});o.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"}},e=>{e.O(0,[909,619,441,255,358],()=>e(e.s=6263)),_N_E=e.O()}]);